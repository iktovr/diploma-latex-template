% Author: CatInCosmicSpace
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{08-formulas}[2021/03/21 v1.2 Формулы]

\RequirePackage{mathtools}
\RequirePackage{amsfonts}

% Настройки по умолчанию в целом соответствуют ГОСТ

% 6.8.1 Уравнения и формулы следует выделять из текста в отдельную строку. Выше и ниже каждой
% формулы или уравнения должно быть оставлено не менее одной свободной строки. 
\makeatletter
\g@addto@macro\normalsize{%
  \setlength\abovedisplayskip{0pt}
  \setlength\belowdisplayskip{1em}
  \setlength\abovedisplayshortskip{0pt}
  \setlength\belowdisplayshortskip{1em}
}
\makeatother

% Несколько формул подряд также разделяются пустой строкой
\def\increaseFormulasSpacing{\setlength{\jot}{\baselineskip}}
\increaseFormulasSpacing

% Команда для восстановления стандартного расстояния между формулами
\def\restoreFormulasSpacing{\setlength{\jot}{3pt}}

% Автоматическое уменьшение расстояния между формулами для многострочных формул
\AddToHook{env/split/before}{\restoreFormulasSpacing}
\AddToHook{env/split/after}{\increaseFormulasSpacing}

\AddToHook{env/multline/begin}{\restoreFormulasSpacing}
